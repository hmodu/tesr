<html>

<head>
    <title>Group 3 CW</title>
    <link rel="manifest" href="Lesson.webmanifest">
</head>

<body>
    <div class="container-sm">
        <div class="col-sm-12">
            <div class="card" style="padding: 10px; margin-bottom: 10px; margin-top: 10px;">
                <div id="app">
                    <header>
                        <h1> {{ sitename }}</h1>
                        <button class="btn btn-secondary" style="float: right;"
                            v-on:click='showCheckout'>{{cartItemCount}}
                            Checkout</button>
                    </header>
                    <main>
                        <div V-if='showProduct'>
                            <figure>
                                <img v-bind:src="product.image">
                            </figure>
                            <h2 v-text="product.title"></h2>
                            <p v-text="product.description"></p>
                            <p> Location: {{product.location}}</p>
                            <p> Spaces: <v-on:click>{{cartItemCount}} </p>
                            <p> Price: {{ product.price }}</p>
                            <!-- This button would display when 'Add to cart is true'-->
                            <button class="btn btn-secondary" v-on:click='addToCart' v-if='canAddToCart'> Add to
                                Cart</button>

                            <!-- This button will be disabled otherwise-->
                            <button disabled='disabled' v-else>Add to cart</button>
                        </div>
                        <div V-else>
                            <p>We have run out of spaces, Please check later.</p>
                        </div>
                    </main>
                </div>
            </div>
        </div>
    </div>
</body>

<script type="text/javascript">
    var webstore = new Vue({
        el: '#app',
        data: {
            showProduct: true,
            sitename: 'After School Club',
            store: [], //array to store items in shopping cart,
            product: {
                id: 10,
                title: "Math",
                description: "Mathematics",
                price: 50,
                location: "Congo",
                image: "images/",
                availableInventory: 5
            },
            cart: [] //creation of an empty array called cart
        },
        methods: {
            addToCart: function () {
                console.log('test');
                console.log(this.store);
                // product id (in this case is 1001) will be stored in the cart array
                this.cart.push(this.product.id);
            },
            showCheckout: function () {
                this.showProduct = this.showProduct ? false : true;
            },
            submitForm() {
                alert('Order has been placed');
            }
        },
        computed: {
            cartItemCount: function () {
                return this.cart.length || '';
            },
            canAddToCart: function () {
                return this.product.availableInventory > this.cartItemCount;
            }
        }

    });
</script>

</html>
